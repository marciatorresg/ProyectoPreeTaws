import{a as ee}from"./chunk-6HGRJNLM.js";import{a as W,g as Z}from"./chunk-ZYVS25A3.js";import{E as K,d as T,e as V,g as j,h as R,i as z,j as Y,l as B,m as X,p as Q,q as J,r as N,s as U,t as A,u as H,x as q,y as G}from"./chunk-6WX2CP4S.js";import"./chunk-RTFPVDOB.js";import"./chunk-FZM53YFU.js";import"./chunk-2D3RX4CC.js";import"./chunk-HB673C6I.js";import"./chunk-HC6MZPB3.js";import"./chunk-4PGTP63H.js";import"./chunk-2Y2A2TBS.js";import"./chunk-FERD25SW.js";import"./chunk-SYQESB6R.js";import"./chunk-LEIMCQKJ.js";import{e as F,j as k}from"./chunk-QGFJA56P.js";import{k as O,l as D,n as $,z as L}from"./chunk-RD4RCTBO.js";import{$a as d,Ba as I,Ga as E,Ka as g,Sa as m,Ta as a,Ua as c,Va as u,Wa as p,Xa as _,Za as C,_a as v,aa as x,ba as h,db as M,eb as S,fb as P,gb as f,hb as y,ua as w,wa as s}from"./chunk-FX33XUP3.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-TNKGEIML.js";import"./chunk-MCRJI3T3.js";import"./chunk-3UM7V7MF.js";import"./chunk-EN76HBSE.js";import"./chunk-G4L4XPAN.js";import"./chunk-XKAILZJY.js";import"./chunk-C4KDTZN3.js";import"./chunk-F7XBNY6P.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-VD4IKDYC.js";import"./chunk-JWIEPCRG.js";import"./chunk-LF5XB4YN.js";import"./chunk-RW4GY4BD.js";var ne=["liveCamera"];function ie(n,o){if(n&1){let i=C();p(0),a(1,"ion-item",12),v("click",function(){let t=x(i).$implicit,r=d(2).$implicit,l=d(2).$implicit,b=d();return h(b.openDetail(l.name,r.year.toString(),t.name))}),a(2,"ion-label"),f(3),c()(),_()}if(n&2){let i=o.$implicit;s(3),y(i.name)}}function ae(n,o){if(n&1&&(p(0),a(1,"ion-list"),g(2,ie,4,1,"ng-container",6),c(),_()),n&2){let i=d().$implicit;s(2),m("ngForOf",i.months)}}function oe(n,o){if(n&1){let i=C();p(0),a(1,"ion-item",12),v("click",function(){let t=x(i).$implicit,r=d(3);return h(r.toggleYear(t))}),a(2,"ion-label"),f(3),c()(),g(4,ae,3,1,"ng-container",13),_()}if(n&2){let i=o.$implicit;s(3),y(i.year),s(),m("ngIf",i.expanded)}}function re(n,o){if(n&1&&(p(0),a(1,"ion-list"),g(2,oe,5,2,"ng-container",6),c(),_()),n&2){let i=d().$implicit;s(2),m("ngForOf",i.years)}}function ce(n,o){if(n&1){let i=C();p(0),a(1,"ion-item",12),v("click",function(){let t=x(i).$implicit,r=d();return h(r.toggleCamera(t))}),a(2,"ion-label"),f(3),c()(),g(4,re,3,1,"ng-container",13),_()}if(n&2){let i=o.$implicit;s(3),y(i.name),s(),m("ngIf",i.expanded)}}function se(n,o){if(n&1&&(a(0,"ion-col",14)(1,"ion-card",15),u(2,"img",16),c()()),n&2){let i=o.$implicit;s(2),m("src",i,w)}}W({"stop-outline":Z});var ve=(()=>{let o=class o{constructor(e,t){this.router=e,this.dataService=t,this.isDragging=!1,this.offsetX=0,this.offsetY=0,this.imagenes=[],this.menuData=[{name:"Backyard",years:[{year:2025,expanded:!1,months:[{name:"January",expanded:!1},{name:"February",expanded:!1}]}],expanded:!1},{name:"Living Room",years:[{year:2025,expanded:!1,months:[{name:"January",expanded:!1},{name:"February",expanded:!1}]}],expanded:!1},{name:"Main Room",years:[{year:2025,expanded:!1,months:[{name:"January",expanded:!1},{name:"February",expanded:!1}]}],expanded:!1}]}ngOnInit(){this.dataService.detecciones$.subscribe(e=>{this.imagenes=e})}toggleCamera(e){e.expanded=!e.expanded}toggleYear(e){e.expanded=!e.expanded}toggleMonth(e){e.expanded=!e.expanded}openDetail(e,t,r){this.router.navigate([`/detalle/${e}/${t}/${r}`])}startDrag(e){let t=e.currentTarget;this.isDragging=!0,this.offsetX=e.clientX-t.getBoundingClientRect().left,this.offsetY=e.clientY-t.getBoundingClientRect().top,document.addEventListener("mousemove",this.drag.bind(this)),document.addEventListener("mouseup",this.stopDrag.bind(this))}drag(e){if(!this.isDragging)return;let t,r;e instanceof MouseEvent?(t=e.clientX,r=e.clientY):(t=e.touches[0].clientX,r=e.touches[0].clientY);let l=document.getElementById("floating-btn");if(l){let b=t-this.offsetX,te=r-this.offsetY;l.style.left=`${b}px`,l.style.top=`${te}px`}}stopDrag(){this.isDragging=!1,document.removeEventListener("mousemove",this.drag.bind(this)),document.removeEventListener("mouseup",this.stopDrag.bind(this)),document.removeEventListener("touchmove",this.drag.bind(this)),document.removeEventListener("touchend",this.stopDrag.bind(this))}ngAfterViewInit(){this.startLiveCamera()}startLiveCamera(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{this.liveCamera&&this.liveCamera.nativeElement&&(this.liveCamera.nativeElement.srcObject=e)}).catch(e=>{console.error("No se pudo acceder a la c\xE1mara:",e)}):console.warn("La API de medios no est\xE1 disponible en este navegador.")}};o.\u0275fac=function(t){return new(t||o)(I(F),I(ee))},o.\u0275cmp=E({type:o,selectors:[["app-cameras"]],viewQuery:function(t,r){if(t&1&&M(ne,5),t&2){let l;S(l=P())&&(r.liveCamera=l.first)}},decls:24,vars:2,consts:[["contentId","main-content"],["color","dark"],[1,"header-title",2,"display","flex","align-items","center","justify-content","center"],["src","assets/images/Logo.png","alt","Logo","height","80","width","80",2,"margin-top","25px","margin-bottom","16px"],[1,"ion-padding"],[1,"text-white"],[4,"ngFor","ngForOf"],["id","main-content",1,"ion-page"],["slot","start"],[1,"header-title"],[1,"center","text-white"],["size","12","size-md","4","size-lg","3","class","imagen-col",4,"ngFor","ngForOf"],["button","",3,"click"],[4,"ngIf"],["size","12","size-md","4","size-lg","3",1,"imagen-col"],[1,"imagen-card"],["alt","Detecci\xF3n",3,"src"]],template:function(t,r){t&1&&(a(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title",2),u(4,"img",3),c()()(),a(5,"ion-content",4)(6,"ion-card-header")(7,"ion-card-title",5),f(8,"Registers"),c()(),a(9,"ion-list"),g(10,ce,5,2,"ng-container",6),c()()(),a(11,"div",7)(12,"ion-header")(13,"ion-toolbar",1)(14,"ion-buttons",8),u(15,"ion-menu-button"),c(),a(16,"ion-title",9),u(17,"img",3),c()()(),a(18,"ion-card-title",10),f(19,"Registros con camara"),c(),a(20,"ion-content",1)(21,"ion-grid")(22,"ion-row"),g(23,se,3,1,"ion-col",11),c()()()()),t&2&&(s(10),m("ngForOf",r.menuData),s(13),m("ngForOf",r.imagenes))},dependencies:[K,T,V,j,R,z,Y,B,X,Q,J,N,U,A,H,q,G,$,O,D,L,k],styles:[".header-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.menu-content[_ngcontent-%COMP%]{background-color:#121212;color:#fff;padding:0 0 16px}.menu-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;padding:16px}.menu-list[_ngcontent-%COMP%]{--background: #121212;--ion-item-background: #121212;--color: white;--border-color: #2a2a2a}ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--inner-padding-end: 16px;--min-height: 44px;font-size:16px}.camera-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;padding:10px}#floating-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:30px;height:80px;border-radius:50%;display:flex;justify-content:center;align-items:center;background:transparent;border:none;box-shadow:none;padding:0}#floating-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.no-signal-box[_ngcontent-%COMP%]{background-color:#444;color:#fff;width:80%;height:150px;display:flex;align-items:center;justify-content:center;font-weight:700;border-radius:10px;border:2px solid white;margin-top:10px}.camera-list[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;align-items:center;gap:10px;padding:10px}.live-video[_ngcontent-%COMP%]{width:80%;height:150px;border:4px solid white;border-radius:10px;object-fit:cover}"]});let n=o;return n})();export{ve as CamerasPage};
